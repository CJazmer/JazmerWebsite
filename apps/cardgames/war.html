<!DOCTYPE html>
<html lang="en">
<head>
	<title>War</title>
	<meta name="author" content="Conner Jasmer">
	<meta name="description" content="Generate random info">
	<meta name="keywords" content="random, info, generator">
	<style>
		.cardup{
            min-width: 4em;
            width: 4em;
            height: 7em;
            margin-right: -3em;
            background-color: white;
            border-radius: 10%;
            border: .2em solid black;
            padding: .5em;
        }
        .carddown{
            width: 4em;
            height: 7em;
            padding: .5em;
            margin-right: -4em;
            background-image: radial-gradient(blue, cyan);
            border-radius: 10%;
            border: .2em solid black;
            text-align: center;
        }
        #deckview{
            display: flex;
            flex-wrap: wrap;
            overflow-y: scroll;
            padding-bottom: 3em;
            height: 10em;
            background-color: gray;
        }
        button{
            width: 100%;
            height: 2.5em;
            max-height: 2.5em;
            border-radius: .2em;
        }
        .cardholder{
            display: flex;
            flex-wrap: nowrap;
            justify-content: left;
            background-color: forestgreen;
            padding: 1em;
            border: .3em solid black;
            overflow-x: scroll;
            width: 100%;
        }
        #heading{
            text-align: center;
        }
        .flex{
            min-width: 100%;
            display: flex;
            background-color: lightgreen;
        }
        .middle{
            display: flex;
            margin: 0em;
            padding: .5em;
            text-align: center;
            background-color:aquamarine;
        }
        .bigcardholder{
            width: 40%;
            min-height: 10em;
            justify-content: center;
        }
        .bigcard{
            width: 5em;
            height: 9em;
            margin: 0em auto 0em auto;
            background-color: white;
            border: .2em solid black;
            border-radius: 10%;
        }
        .midscorething{
            width: 20%;
            background-image: radial-gradient(lime, green);
            border-radius: 20%;
            border: .5em solid black;
        }
        #heading{
            font-weight: 900;
        }
        table{
            margin: 1em auto 1em auto;
            background-color: aquamarine;
            border: .2em solid blue;
            border-radius: 4%;
            padding: .5em;
        }
        table tr button{
            width: 100%;
        }
        .tips{
            background-color: aquamarine;
            margin: 0em;
            padding: .5em;
            text-align: left;
        }
    </style>
</head>

<body>
		<div class="wrapper" style="background: linear-gradient(to right, tan, rgb(206, 152, 82) 100%);">
			<div id="layoutpagenav"></div>

            <div class="cardholder" id="haideck"></div>
            <div class="middle">
                <div class="bigcardholder" id="hbigplayercard"></div>
                <div class="midscorething">
                    <p class="score">
                        <span id="hscore"></span><br>
                        <span id="htitle"></span>
                   </p>
                   <button onclick="NextMove()">Next Move</button>
                </div>
                <div class="bigcardholder" id="hbigaicard"></div>
            </div>
            <div class="cardholder" id="hplayerdeck"></div>
            
            <table>
                <tr><th>Set Money</th><td><input type="number" value="200" id="inputplayermoney"></td></tr>
                <tr>
                    <th><button onclick="Reset()">Reset Game</button></th>
                    <td><button onclick="ApplyRules()" style="background-color: greenyellow;">Apply Settings</button></td>
                </tr>
            </table>
            <div id="deckview"></div>

            <p class="tips">
                <b>Setup:</b> 1 Deck, 2 or more players, split the deck evenly among players<br>
                <b>Rank (Low to High):</b> 2, 3, 4, 5, 6, 7, 8, 9, 10, J, Q, K, A, Joker<br>
                <b>How to Play: </b> deck <br>
            </p>
            <table>
                <tr><th>Card Wins</th><td id="hcardwins"></td></tr>
                <tr><th>Game Wins</th><td id="hgamewins"></td></tr>
                <tr><th>Money Gain</th><td id="hmoneystats"></td></tr>
            </table>
            <footer></footer>
			</div>
		</div>
</body>
</html>

<!-- -------------------------Javascript------------------------- -->
<script src="../../layout.js"></script>
<script>
    const hplayerdeck = document.getElementById("hplayerdeck");
    const haideck = document.getElementById("haideck");
    const hscore = document.getElementById("hscore");
    const hbigplayercard = document.getElementById("hbigplayercard");
    const hbigaicard = document.getElementById("hbigaicard");
    const htitle = document.getElementById("htitle");
    const hgamewins = document.getElementById("hgamewins");
    const hcardwins = document.getElementById("hcardwins");

// ♥️♠️♦️♣️
const defaultdeck = [
    "A♠️", "2♠️", "3♠️", "4♠️", "5♠️", "6♠️", "7♠️", "8♠️", "9♠️", "10♠️", "J♠️", "Q♠️", "K♠️",
    "A♥️", "2♥️", "3♥️", "4♥️", "5♥️", "6♥️", "7♥️", "8♥️", "9♥️", "10♥️", "J♥️", "Q♥️", "K♥️",
    "A♦️", "2♦️", "3♦️", "4♦️", "5♦️", "6♦️", "7♦️", "8♦️", "9♦️", "10♦️", "J♦️", "Q♦️", "K♦️",
    "A♣️", "2♣️", "3♣️", "4♣️", "5♣️", "6♣️", "7♣️", "8♣️", "9♣️", "10♣️", "J♣️", "Q♣️", "K♣️",
];
let deck = [].concat(defaultdeck);
let playerdeck = [];
let aideck = [];
let cardwins = 0;
let gamewins = 0;
let cardchallenges = 0;

Reset();
UpdateScreen();

function Reset(){
    ShuffleDeck()
    for(i=0; i<deck.length/2; i++){
        aideck.push(deck[i]);
    }
    deck = deck.slice(deck.length/2, deck.length);
    playerdeck = [].concat(deck);
    deck = [];


    
}
function UpdateScreen(){
    hplayerdeck.innerHTML = "";
    haideck.innerHTML = "";

playerdeck.forEach(c => {
    hplayerdeck.innerHTML += `<div class="cardup">${c}</div>`;
})
aideck.forEach(c => {
    haideck.innerHTML += `<div class="carddown"></div>`;
})

hscore.innerHTML = `You: ${playerdeck.length} | AI: ${aideck.length}`;
hcardwins.innerHTML = `Wins: ${cardwins} | Losses: ${cardchallenges-cardwins}`;
}
function ShuffleDeck(){
    olddeck = [].concat(deck);
    deck = [];
    while(olddeck.length > 0){
        let r = randomnum(0,olddeck.length-1);
        deck.push(olddeck[r])
        olddeck.splice(r, 1);
    }
}
function NextMove(){
    plr = ValueOf(playerdeck[0]);
    ai = ValueOf(aideck[0]);

    hbigplayercard.innerHTML = `<div class="bigcard">${playerdeck[0]}</div>`;
    hbigaicard.innerHTML = `<div class="bigcard">${aideck[0]}</div>`;

    if(plr == ai){ // WAR!!!
        htitle.innerHTML = "WAR!"
    }
    else if(plr > ai){ // Player Wins
        htitle.innerHTML = "Win";
        playerdeck.push(aideck[0]);
        aideck.shift();
        cardwins++;
    }
    else{ // AI Wins
        htitle.innerHTML = "Loss";
        aideck.push(playerdeck[0]);
        playerdeck.shift();
    }
    cardchallenges++;

    console.log(`player: ${plr} | AI: ${ai}`)

    UpdateScreen();
}
function ValueOf(num){
    const cardvalues = ["2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"]; 
    num = num.slice(0,-2); // Remove card type club/heart/spade...
    let val = 0;
    for(i=0; i<cardvalues.length; i++){
    if(num == cardvalues[i]){val = i+2}
    };
    return val;
}

</script>